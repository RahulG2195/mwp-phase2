<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="<?php echo base_url() ?>assets/front/css/test.css">

  <title>Document</title>

</head>

<body>

  <section class="timeline">

    <ol>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li>

        <div class="content_block">

          <img data-src="<?php echo base_url() . MAIN_IMG ?>timeline_img.png" alt="">

          <span class="para">

            <h4>Word of President</h4>

            <p>Restoring the lost Glory</p>

            <p>‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums, Sky high ceilings, Pieces of art, Grandiose of live of Kings and Queens, Voices of masses, Famous speeches and heart pounding sense of patriotism and glory. ‘Restoring the lost Glory’. History comes alive, when we walk into one of these Heritage structures – the sounds of warm trumpets, beating of drums,</p>

          </span>

        </div>

      </li>

      <li></li>

    </ol>



    <div class="arrows">

      <button class="arrow arrow__prev disabled" disabled>

        <img data-src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/arrow_prev.svg" alt="prev timeline arrow">

      </button>

      <button class="arrow arrow__next">

        <img data-src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/arrow_next.svg" alt="next timeline arrow">

      </button>

    </div>

  </section>

</body>

</html>

<script>
  (function() {

    // VARIABLES

    const timeline = document.querySelector(".timeline ol"),

      elH = document.querySelectorAll(".timeline li > div"),

      arrows = document.querySelectorAll(".timeline .arrows .arrow"),

      arrowPrev = document.querySelector(".timeline .arrows .arrow__prev"),

      arrowNext = document.querySelector(".timeline .arrows .arrow__next"),

      firstItem = document.querySelector(".timeline li:first-child"),

      lastItem = document.querySelector(".timeline li:last-child"),

      xScrolling = 280,

      disabledClass = "disabled";



    // START

    window.addEventListener("load", init);



    function init() {

      setEqualHeights(elH);

      animateTl(xScrolling, arrows, timeline);

      setSwipeFn(timeline, arrowPrev, arrowNext);

      setKeyboardFn(arrowPrev, arrowNext);

    }



    // SET EQUAL HEIGHTS

    function setEqualHeights(el) {

      let counter = 0;

      for (let i = 0; i < el.length; i++) {

        const singleHeight = el[i].offsetHeight;



        if (counter < singleHeight) {

          counter = singleHeight;

        }

      }



      for (let i = 0; i < el.length; i++) {

        el[i].style.height = `${counter}px`;

      }

    }



    // CHECK IF AN ELEMENT IS IN VIEWPORT

    // http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport

    function isElementInViewport(el) {

      const rect = el.getBoundingClientRect();

      return (

        rect.top >= 0 &&

        rect.left >= 0 &&

        rect.bottom <=

        (window.innerHeight || document.documentElement.clientHeight) &&

        rect.right <= (window.innerWidth || document.documentElement.clientWidth)

      );

    }



    // SET STATE OF PREV/NEXT ARROWS

    function setBtnState(el, flag = true) {

      if (flag) {

        el.classList.add(disabledClass);

      } else {

        if (el.classList.contains(disabledClass)) {

          el.classList.remove(disabledClass);

        }

        el.disabled = false;

      }

    }



    // ANIMATE TIMELINE

    function animateTl(scrolling, el, tl) {

      let counter = 0;

      for (let i = 0; i < el.length; i++) {

        el[i].addEventListener("click", function() {

          if (!arrowPrev.disabled) {

            arrowPrev.disabled = true;

          }

          if (!arrowNext.disabled) {

            arrowNext.disabled = true;

          }

          const sign = this.classList.contains("arrow__prev") ? "" : "-";

          if (counter === 0) {

            tl.style.transform = `translateX(-${scrolling}px)`;

          } else {

            const tlStyle = getComputedStyle(tl);

            // add more browser prefixes if needed here

            const tlTransform =

              tlStyle.getPropertyValue("-webkit-transform") ||

              tlStyle.getPropertyValue("transform");

            const values =

              parseInt(tlTransform.split(",")[4]) +

              parseInt(`${sign}${scrolling}`);

            tl.style.transform = `translateX(${values}px)`;

          }



          setTimeout(() => {

            isElementInViewport(firstItem)

              ?
              setBtnState(arrowPrev)

              :
              setBtnState(arrowPrev, false);

            isElementInViewport(lastItem)

              ?
              setBtnState(arrowNext)

              :
              setBtnState(arrowNext, false);

          }, 1100);



          counter++;

        });

      }

    }



    // ADD SWIPE SUPPORT FOR TOUCH DEVICES

    function setSwipeFn(tl, prev, next) {

      const hammer = new Hammer(tl);

      hammer.on("swipeleft", () => next.click());

      hammer.on("swiperight", () => prev.click());

    }



    // ADD BASIC KEYBOARD FUNCTIONALITY

    function setKeyboardFn(prev, next) {

      document.addEventListener("keydown", (e) => {

        if (e.which === 37 || e.which === 39) {

          const timelineOfTop = timeline.offsetTop;

          const y = window.pageYOffset;

          if (timelineOfTop !== y) {

            window.scrollTo(0, timelineOfTop);

          }

          if (e.which === 37) {

            prev.click();

          } else if (e.which === 39) {

            next.click();

          }

        }

      });

    }

  })();
</script>